## CHAPTER 1. 파일 시스템 관련 명령어



### 01 권한 및 그룹 설정

* 명령어 **chown** : 파일과 디렉터리의 **사용자** 소유권과 **그룹** <u>소유권을 **변경**</u>한다.

  * -R : <u>하위 디렉터리를 포함</u>하여 디렉터리 내부의 모든 파일의 <u>소유권 변경</u> 

* 명령어 **chgrp** : change group의 줄임말. <u>**그룹** 소유권</u>을 **변경**한다.

* **허가권** 관련 명령어 : 명령어 "ls -l"으로 파일 유형과 허가권을 알 수 있다. ex) ㉠<u>-</u> ㉡<u>rw-rw-r--</u>

  * ㉠ 파일 유형

    - ― : 일반 파일

    * d   : 디렉터리 파일

  * ㉡ 파일 전근 권한

    * b : 블록 단위로 읽고 쓰는 블록 장치 특수 파일 ex) 하드디스크, CD/DVD 등의 저장 장치
    * c : 문자 단위로 읽고 쓰는 문자 장치 특수 파일 ex) 마우스, 키보드, 프린터의 입출력 장치 
    * I : 기호적 링크로 바로가기 아이콘 역할 수행 
    * p : 파이프
    * s : 소캣
    
  * 사용자별 권한 표시 (읽기, 쓰기, 접근)

    * 기호모드 (**r, w, x**)
    * 숫자모드 (**4, 2, 1**)

* 명령어 **chmod** : 파일이나 디렉터리의 <u>**접근 허가권**을 변경</u>한다.

* 명령어 **umask** : 새로 생성되는 파일이나 디렉터리의 <u>**기본 허가권** 값을 지정</u>한다.

  * 파일의 기본 허가권: **666**
  * 디렉터리의 기본 허가권 : **777**

* 특수 권한 **SetUID, SetGID** : 프로세스가 실행되는 동안 해당 프로세스의 **root 권한을 임시로 가져오는 기능**

  * SetUID : 소유자 권한으로 실행 ( (소문자) **s :** 실행 권한 있음, (대문자) **S :** 실행 권한 없음)
  * SetGID : 그룹 권한으로 실행 (모든 하위 디렉터리나 파일 포함해서 권한 가짐)

* **Sticky bit** : 공용 디렉터리내에 **삭제 권한에 제약**을 두는 것이다.

  * 파일 **생성**은 **누구나** 가능. / **삭제**는 파일 **생성자 또는 관리자**(root)만 가능
  * 일반적으로 sticky bit로 설정되는 디렉터리는 **/tmp** 안에 생성한다.
  * **t** : Sticky bit 설정

* **디스크 쿼터 (Disk Quota)** : 생성할 수 있는 파일의 용량 및 개수를 제한하는 것이다.

  *1* 파일 /etc/fstab에 디스크 쿼터 관련 설정

  *2* 재마운팅 실행 후 확인

  *3* 마운트된 쿼터를 끄고 생성된 쿼터 파일 삭제

  *4* 쿼터 데이터베이스 생성

  *5* 사용자별 쿼터 지정

  *6* 쿼터 현재 상황 점검

  * 명령어 **quota<u>check</u>** : 파일 시스템의 **디스크 사용 상태를 검색**한다.
  
  * 명령어 **<u>ed</u>quota** : **편집기**를 이용하여 사용자나 그룹에 **디스크 사용량을 할당**한다.
  
  * 명령어 **<u>set</u>quota** : **편집기** 기반이 **아닌** 명령행에서 **직접 사용량을 할당**한다.



### 02 파일 시스템의 관리

* **개요**

  * **파일 시스템** : 파일을 시스템의 디스크상에 구성하는 방식
  * 파일이나 자료를 **쉽게 찾을 수 있게 보관** 또는 조직하는 체제.
  * 물리적 저장소를 관리

  

  * **Super Block** : 해당 파일 시스템 관련 정보 저장 ex) 블록의 크기, 총 블록 개수, inode 개수
  * **Group Desciptor Table** : 각 Block Group을 관리하는 정보 저장
  * **Block bitmap** : 그룹 내에 있는 각 블록의 <u>사용 상태</u>를 나타냄
  * **inode** : 파일에 대한 제어정보 및 데이터 블록 포인터 저장

* **종류**
  * **리눅스 전용** 디스크 기반 파일 시스템
    * ext : 리눅스 초기 파일 시스템. 호환성 x 
    * ext2 : 고용량 디스크 사용을 염두해두고 설계됨. 쉽게 호환
    * ext3 : 저널링 지원. ACL을 통한 접근 제어 지원
    * ext4 : 파일 접근 속도 향상 및 단편화 줄임. 파일 확장자 필요 x. 
                 '.' 현재 디렉터리 '..' 부모디렉터리 사용 가능
  * **저널링 파일 시스템** : 비정상 종료 시, **저널(로그)**을 이용해 빠르고 안전적인 복구 가능
    * **JFS** : <u>IBM사</u>의 독자적 저널링 파일 시스템
    * **XFS** : 고성능 저널링 시스템, 높은 확장성과 처리량. 64비트 지원. 파일 수에 구애 x
    * **ReiserFS** : 리눅스용 저널링 파일 시스템 중 **가장 안정적**. 간결, 색인화된 디렉터리
  * **네트워크 파일 시스템** 
    * **SMB** 
      * 윈도우 OS 에서 파일/프린터 공유 프로토콜 사용
      * 리눅스, 유닉스 OS 와 윈도우 OS와의 자료 및 하드웨어 공유
      * 윈도우에서 처음 클라이언트 환경 구성, NFS 유닉스 표준 응용부터 운용이 쉽다
    * **CIFS** 
      * SMB 확장형
      * 라우터를 뛰어넘어 연결할 수 있음
    * **NFS** 
      * 썬사에서 개발
      * 공유된 영역을 마운트할 때 지정
      * 하드웨어, 운영체제 또는 네트워크 구조가 달라도 공유 가능
      * 특정 디렉터리를 마운트해서 사용 가능
  * 기타 지원 가능한 파일 시스템
    * FAT : <u>가장 간단.</u> 클러스터 단위의 할당.
    * VFAT : FAT보다 제한이 적음. 대소문자 구분 x. 공백 가능
    * FAT32 : 다중 부팅 구성. 32GB보다 큰 파티션은 불가능
    * NTFS : 윈도우에서 사용. 안정성이 뛰어남. 대용량 파일 저장
    * ISO 9660 : CD-ROM의 표준 파일 시스템
    * UDF : 최신 파일 시스템 형식. 광학 매체용 표준. DVD로 대체도 가능
    * HPFS : OS /2 운영체제를 위해 만들어진 파일 시스템. Microsoft와 IBM 공동 개발
* 명령어 **mount, umount** 
  * **마운트** : 특정 디바이스를 특정 디렉터리처럼 사용하기 위해 **<u>장치</u>와 <u>디렉터리</u>를 <u>연결</u>**하는 것
  * 자동으로 마운트 지원하는 하드웨어가 많지 않아서 **수동으로** 마운트, 언마운트 시켜야 함
  * **mount**
    * -a : /etc/fstab 파일에 정의된 모든 시스템 마운트
    * -n : /etc/mtab 파일에 정보를 저장하지 않고 마운트
    * -f : 마운트 가능한지 테스트
    * /etc/mtab : 현재 마운트된 블록 시스템 정보 표시
    * /etc/fstab : 시스템 부팅 시, 여기서 마운트 정보 참조
  * **umount**
    * -a : /etc/mtab 에 명시된 파일 시스템 마운트 해제
    * -n : /etc/mtab 파일을 갱신하지 않고 마운트 해제
    * -t : 언마운트할 파일 시스템 지정
* 명령어 **eject** : 이동식 보조기억장치 같은 **미디어**를 해제. **장치 제거**
* 명령어 **fdisk** : **파티션** 생성, 삭제, 타입 설정 등 작업 수행. (한 번에 한 디스크에 대해서만)
  * p : 디스크 정보 표시
  * n : 파티션 생성
  * t : 파티션 속성 지정
  * d : 파티션 삭제
  * w : 변경된 파티션 정보 저장
  * q : 파티션 설정 작업 종료
* 명령어 **mkfs** : 리눅스 파일 시스템 생성
* 명령어 **mke2fs** : etc2, etc3, etc4 타입의 리눅스 <u>파일 시스템 **생성**</u>(포멧)
* 명령어 **fsck** : 무결성 점검 (대화형)
  
  * **/lost+found** : 이상 유무를 진단하고 복구하는 데에 사용되는 디렉터리
* 명령어 **e2fsck** : etc2, etc3, etc4 타입의 리눅스 <u>파일 시스템 **점검 및 복구**</u>
* 명령어 **du** : Disk Usage의 약어. **디렉터리별** 디스크 <u>사용량 확인</u>
* 명령어 **df** : **마운트된** 하드 디스크 남은 용량 확인
* **파일 /etc/fstab** : 사용하는 파일 시스템 정보 정적으로 저장하고 있는 파일
