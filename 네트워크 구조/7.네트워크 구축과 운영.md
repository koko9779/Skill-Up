## 7. 네트워크 구축과 운영



#### :pencil2: 네트워크 구성 설계

**1단계) 네트워크 이용현황 조사** 

ex. 이용자 수, 이용 요일과 시간대, 접속 단말수, 접속 방법(유/무선), 이용자 종류(사원, 방문객), 이용하는 애플리케이션, 이용하는 WAN 회선, 보안상 주의사항 등

**2단계) LAN 구성 설계**

**3단계) WAN 구성 설계**

**4단계) 보안 설계**

**5단계) 모니터링 설계**



<hr>



#### :pencil2: ​조직 네트워크를 구성하는 법

###### 서브넷 구성

조직 네트워크는 매우 소규모인 경우를 제외하고 전체를 하나의 네트워크로 구성하지 않음

일반적으로 동일한 부서별로 서브넷으로 묶어 분할하여 접속하도록 구성

###### IP 주소 할당

서브넷 분할 방침이 정해지면 각 서브넷에 네트워크 주소를 할당함

보통 할당되는 것은 사설 IP주소. 부서별 단말에 맞춰 IP주소에 충분한 여유가 있도록 서브넷 마스크를 결정함

###### 라우팅

서브넷끼리 통신 가능 여부를 설정하는 경우도 있음

이 경우 각 라우터의 라우팅 테이블 또는 필터에 반영함



<hr>



#### :pencil2: 서버를 고르는 법

###### 네트워크 기기의 검토 사항

* 안전성
* 상호접속성
* 성능
* 기능
* AS
* 가격

###### 클라우드 vs 온프리미스(조직 내에 서버를 두는 것) 

**클라우드** 검토 사항 : ①보안 ②사내에서 안전한 접속 방법 ③반응속도 ④종량과금인 경우에 이용료 수준

**온프리미스** 검토 사항: ①적절한 공조의 설치 장소 ②정전이나 재해에 대한 대책 ③백업 방식 ④스펙 변경 필요성 유무

각각의 특징이 있기 때문에 서버의 사양은 <u>CPU의 종류, 메모리 용량, 하드디스크 크기, RAID 방식, 네트워크 인터페이스 속도</u> 등 사용 목적에 부합하는 것을 선택해야 함 (추측이 어려운 경우, 계약 후 일부 사양 변경이 가능한 클라우드 선택)



<hr>



#### :pencil2: ​엑세스 회선과 ISP 고르는 법

사무실이나 가정에서 네트워크를 인터넷에 접속시키려면 인터넷 접속 서비스를 제공하는 회사를 선택해야 함

###### 종류

* 액세스 회선 서비스
* ISP 서비스

두가지를 조햡해서 사용 (실효속도는 양쪽 모두의 영향을 받음)

###### 액세스 회선

: 가장 가까운 전화국에서 사무실이나 가정까지 연결되는 광회선

NTT나 KDDI 등의 동신사업자가 제공

###### ISP

프로바이더가 제공



<hr>



#### :pencil2: ​서버의 공개

###### 방법

* 조직의 건물 내에 서버를 두는 방법
* 데이터센터에 서버를 두는 방법
* 클라우드 서버를 이용하는 방법

###### 조직의 건물 내에 서버를 두는 방법

안전한 공조와 전원을 확보할 수 있는 공간에 서버를 둠과 동시에 방화벽에 DMZ를 설정해서 여기에 서버를 연결

(필요에 따라서 필터링 설정, 부하 분산을 위한 로드 밸런서 설치)

###### 도메인명의 취득과 DNS 서버 설정의 흐름

**도메인명 취득** : 도메인 등록 대행사나 리셀러한테서 도메인명 취득

↓

**DNS 서버의 준비와 설정** : 두 대 이상의 DNS 서버를 준비해서 자체 도메인의 컨텐츠 서버로서 동작하도록 설정

↓

**DNS 서버의 등록** : 상위의 DNS 서버가 신규 DNS 서버를 찬조할 수 있도록 등록 신청



<hr>



#### :pencil2: ​워크그룹과 도메인

###### 워크그룹

컴퓨터 무리가 동일한 워크그룹명으로 설정되어 있어서 컴퓨터의 목록이나 각 컴퓨터의 준비된 공유 폴더 목록 등을 볼 수 있음

하지만, 이용자 아이디와 암호는 개별 관리

**→ 소규모 네트워크용, 간단**

###### 도메인

이용자 아이디와 암호를 도메인 컨트롤러라고 불리는 서버에서 집중 관리

아이디와 암호가 집중 관리되고 한번 변경하면 모든 영역에 반영됨

**→ 대규모 네트워크용, 윈도우 서버가 필요**



<hr>



#### :pencil2: ​디렉토리 서비스

: 컴퓨터나 네트워크 기기의 소재, 고유정보, 설정 등의 대응 정보를 축적시켜두고 그걸 제공하는 서비스

ex. 이용자 ID, 암호, 메일 주소, 공유 폴더 정보, 서버 정보 등을 축적

로그인 처리시 이용자 정보 다룸 → 디렉토리 장애는 네트워크에서 로그인할 수 없는 중대한 장애로 이어짐

###### 디렉토리 장애 대안

디렉토리 서버를 **여러대** 설치하거나 **분산**해서 설치

###### 디렉토리 서비스의 종류

디렉토리 서비스에 접속하는 프로토콜 : **LDAP**(Lightweight Directory Access Protocol)

* Open LDAP : 많은 OS에서 사용할 수 있는 오픈소스
* Active Directory : 주로 Windows에서 사용
* Open Directory : 주로 MacOS에서 사용



<hr>



#### :pencil2: ​LAN 배선의 부설과 가공

###### 전문업자에게 맡긴다

###### 직접 배선공사를 한다

* 완제품을 사용하는 방법
* 필요한 길이로 케이블을 자르고 커넥터를 달아서 만드는 방법 : 가격 저렴, 가공하는데 공수가 듦

###### 케이블 종류

* 단선 : 전송 효율이 좋기 때문에 배선길이가 길어지는 경우 좋음. 단, 물리적 힘이 약해서 케이블 취급 주의 → 몰 사용
* 복선 



<hr>



#### :pencil2: ​안정적인 전원의 확보

###### 전원에 일어날 수 있는 문제 5가지

* **정전** : 전력 공급이 중단되어 데이터가 사라지거나 파일 시스템이 깨지고 구동 못함

* **순단** : 정말 짧은 시간동안 상용전원이 중단되는 현상(전력계통의 교체 공사 등에 발생)으로 기기 오작동의 원인이 됨

* **전압강하** : 순간적으로 전압이 내려가는 경우 전압 강하가 기기의 오동작을 야기함

* **노이즈** : 외부의 에너지가 전력선에 섞여들어와 오동작을 일으킴 (산업용 기기 또는 천둥 등)

* **스파이크나 서지** : 정말 짧은 시간동안 고전압이 걸리는 현상으로 기기 내 전자회로의 파괴나 기록 데이터 소멸 등 심각한 피해 유발

  (천둥이나 고전력을 소비하는 기기의 급정지)

  (짧은 것 : 스파이크, 긴 것 : 서지)

###### 대책

* 노이즈 필터나 프로텍터를 구비한 테이블 탭을 이용

* **UPS**(uninterruptible power supply : 무정전 전원 장치) 사용



<hr/>



#### :pencil2: ​네트워크의 다중화 (단순한 라우터 이중화 X)

###### 브로드캐스트 스톰

브로드캐스트가 멈출 수 없게 되고 **네트워크 부하를 높이는 현상**

###### 브로드캐스트를 피하는 방법

* **스패닝 트리 프로토콜** 

  스위치에서 **루프가 발생한 포트를 무효로 해줘서** 이로 인해 브로드캐스트 스톰을 방지

* **스위치 스태킹**

  **여러 개의 스위치를 스택으로 쌓아 올려서** 한 대의 스위치처럼 보이도록 하고 **각각 케이블을 자식 스위치에 연결**하여 양쪽을 묶어서 사용하는 것 **(스위치의 스택구성)**



<hr/>



#### :pencil2: ​네트워크 모니터링

: 네트워크가 정상적으로 동작하고 있는지 여부 감시하는 것

###### 사활감시

**응답이 있는지 여부만으로 판단하는 단순한 모니터링**

ping(정확히는 ICMP ECHO요구)의 패킷 응답을 통해서 서버나 네트워크를 감시하는 것

(ping의 응답이 없다면 대상 기기나 경로의 네트워크 중에 문제가 있는 것)

###### 상태감시

**각종 내부 상태를 읽어서 상세히 모니터링**

대상 기기 내부의 통계 정보를 읽어서 기기의 정상 여부나 이상 여부를 찾아내는 방법

'동작한다/하지않는다' 가 아닌 '기기의 부하율이 일정 수준을 넘었다' 또는 '네트워크의 혼잡도가 기준을 돌파했다' 같이 기기의 동작에 주목하여 모니터링

- ###### SNMP(Simple Network Management Protocol)

  상태감시에서 통계 정보를 읽는 수단으로 자주 사용

  정기적으로 외부에서 정보를 읽는 **폴링(Polling)**, 기기가 자율적으로 정보를 내보내는 **트랩(trap)** 두 종류가 있다.



<hr>



#### :pencil2: ​오류 원인 찾기

###### 트러블 슈팅


<u>오류가 있는 부분</u>과 <u>없는 부분</u>을 **분리**하고, <u>오류가 있는 부분을 조금씩 좁혀 나가면서</u> 오류의 원인에 대해 대처하는 절차

###### ping 


어떤 컴퓨터에서 IP주소를 가진 네트워크 기기나 서버에 대해 ICMP ECHO **패킷을 보내서** 기기가 이에 대해서 **응답을 되돌려주는지** 여부를 조사하는 명령어

###### dig 또는 nslookup


도메인명 → IP 주소 변환하는 이름 찾기

